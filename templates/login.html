{% extends "base.html" %}

{% block title %}ç™»å½• - åŒäººåä½œçˆ±å¿ƒç½‘é¡µ{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card login-card">
        <div class="auth-header">
            <div class="auth-icon">â¤ï¸</div>
            <h1>æ¬¢è¿å›æ¥</h1>
            <p class="auth-subtitle">ç™»å½•è´¦å·ï¼Œå¼€å§‹çˆ±å¿ƒåä½œ</p>
        </div>

        <form class="auth-form" method="POST" action="{{ url_for('login') }}" id="loginForm">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

            <div class="form-group">
                <label for="username">ç”¨æˆ·å/é‚®ç®±</label>
                <div class="input-wrapper">
                    <span class="input-icon">ğŸ‘¤</span>
                    <input type="text" id="username" name="username" 
                           placeholder="è¯·è¾“å…¥ç”¨æˆ·åæˆ–é‚®ç®±"
                           required
                           autocomplete="username">
                </div>
            </div>

            <div class="form-group">
                <label for="password">å¯†ç </label>
                <div class="input-wrapper">
                    <span class="input-icon">ğŸ”’</span>
                    <input type="password" id="password" name="password" 
                           placeholder="è¯·è¾“å…¥å¯†ç "
                           required
                           autocomplete="current-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('password', this)">
                        ğŸ‘ï¸
                    </button>
                </div>
            </div>

            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="remember" id="remember">
                    <span class="checkmark"></span>
                    <span>è®°ä½æˆ‘</span>
                </label>
                <a href="#" class="forgot-password">å¿˜è®°å¯†ç ï¼Ÿ</a>
            </div>

            <button type="submit" class="btn btn-primary btn-block btn-large">
                ç™»å½•
            </button>
        </form>

        <div class="auth-footer">
            <p>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ <a href="{{ url_for('register') }}" class="auth-link">ç«‹å³æ³¨å†Œ</a></p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function togglePassword(inputId, button) {
    const input = document.getElementById(inputId);
    if (input.type === 'password') {
        input.type = 'text';
        button.textContent = 'ğŸ™ˆ';
    } else {
        input.type = 'password';
        button.textContent = 'ğŸ‘ï¸';
    }
}

// è¡¨å•éªŒè¯
document.getElementById('loginForm').addEventListener('submit', function(e) {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    
    if (!username) {
        e.preventDefault();
        showFlash('è¯·è¾“å…¥ç”¨æˆ·åæˆ–é‚®ç®±', 'error');
        return;
    }
    
    if (!password) {
        e.preventDefault();
        showFlash('è¯·è¾“å…¥å¯†ç ', 'error');
        return;
    }
});
</script>
{% endblock %}
